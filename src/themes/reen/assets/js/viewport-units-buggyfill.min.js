!function(){!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.viewportUnitsBuggyfill=b()}(this,function(){"use strict";function a(a,b){var c;return function(){var d=this,e=arguments,f=function(){a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}function b(){try{return window.self!==window.top}catch(a){return!0}}function c(c){if(!u){if(!0===c&&(c={force:!0}),q=c||{},q.isMobileSafari=C,q.isBadStockAndroid=D,!q.ignoreVmax||q.force||A||(z=!1),A||!q.force&&!C&&!z&&!D&&!B&&(!q.hacks||!q.hacks.required(q)))return window.console&&A&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};window.dispatchEvent(new E("viewport-units-buggyfill-init")),q.hacks&&q.hacks.initialize(q),u=!0,t=document.createElement("style"),t.id="patched-viewport",document[q.appendToBody?"body":"head"].appendChild(t),m(function(){var c=a(e,q.refreshDebounceWait||100);window.addEventListener("orientationchange",c,!0),window.addEventListener("pageshow",c,!0),(q.force||z||b())&&(window.addEventListener("resize",c,!0),q._listeningToResize=!0),q.hacks&&q.hacks.initializeEvents(q,e,c),e()})}}function d(){t.textContent=i(),t.parentNode.appendChild(t),window.dispatchEvent(new E("viewport-units-buggyfill-style"))}function e(){u&&(g(),setTimeout(function(){d()},1))}function f(a){try{if(!a.cssRules)return}catch(a){if("SecurityError"!==a.name)throw a;return}for(var b=[],c=0;c<a.cssRules.length;c++){var d=a.cssRules[c];b.push(d)}return b}function g(){return s=[],y.call(document.styleSheets,function(a){var b=f(a);b&&"patched-viewport"!==a.ownerNode.id&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(a.media&&a.media.mediaText&&window.matchMedia&&!window.matchMedia(a.media.mediaText).matches||y.call(b,h))}),s}function h(a){if(7===a.type){var b;try{b=a.cssText}catch(a){return}return w.lastIndex=0,void(w.test(b)&&!x.test(b)&&(s.push([a,null,b]),q.hacks&&q.hacks.findDeclarations(s,a,null,b)))}if(!a.style){if(!a.cssRules)return;return void y.call(a.cssRules,function(a){h(a)})}y.call(a.style,function(b){var c=a.style.getPropertyValue(b);a.style.getPropertyPriority(b)&&(c+=" !important"),w.lastIndex=0,w.test(c)&&(s.push([a,b,c]),q.hacks&&q.hacks.findDeclarations(s,a,b,c))})}function i(){r=l();var a,b,c=[],d=[];return s.forEach(function(e){var f=j.apply(null,e),g=f.selector.length?f.selector.join(" {\n")+" {\n":"",h=new Array(f.selector.length+1).join("\n}");if(!g||g!==a)return d.length&&(c.push(a+d.join("\n")+b),d.length=0),void(g?(a=g,b=h,d.push(f.content)):(c.push(f.content),a=null,b=null));g&&!a&&(a=g,b=h),d.push(f.content)}),d.length&&c.push(a+d.join("\n")+b),B&&c.push("* { content: normal !important; }"),c.join("\n\n")}function j(a,b,c){var d,e=[];d=c.replace(w,k),q.hacks&&(d=q.hacks.overwriteDeclaration(a,b,d)),b&&(e.push(a.selectorText),d=b+": "+d+";");for(var f=a.parentRule;f;)f.media?e.unshift("@media "+f.media.mediaText):f.conditionText&&e.unshift("@supports "+f.conditionText),f=f.parentRule;return{selector:e,content:d}}function k(a,b,c){var d=r[c];return parseFloat(b)/100*d+"px"}function l(){var a=window.innerHeight,b=window.innerWidth;return{vh:a,vw:b,vmax:Math.max(b,a),vmin:Math.min(b,a)}}function m(a){var b=0,c=function(){--b||a()};y.call(document.styleSheets,function(a){a.href&&n(a.href)!==n(location.href)&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(b++,o(a.ownerNode,c))}),b||a()}function n(a){return a.slice(0,a.indexOf("/",a.indexOf("://")+3))}function o(a,b){p(a.href,function(){var c=document.createElement("style");c.media=a.media,c.setAttribute("data-href",a.href),c.textContent=this.responseText,a.parentNode.replaceChild(c,a),b()},b)}function p(a,b,c){var d=new XMLHttpRequest;if("withCredentials"in d)d.open("GET",a,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");d=new XDomainRequest,d.open("GET",a)}return d.onload=b,d.onerror=c,d.send(),d}var q,r,s,t,u=!1,v=window.navigator.userAgent,w=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,x=/(https?:)?\/\//,y=[].forEach,z=/MSIE [0-9]\./i.test(v),A=/MSIE [0-8]\./i.test(v),B=v.indexOf("Opera Mini")>-1,C=/(iPhone|iPod|iPad).+AppleWebKit/i.test(v)&&function(){var a=v.match(/OS (\d+)/);return a&&a.length>1&&parseInt(a[1])<10}(),D=function(){return v.indexOf(" Android ")>-1&&(v.indexOf("Version/")>-1&&parseFloat((v.match("Android ([0-9.]+)")||[])[1])<=4.4)}();z||(z=!!navigator.userAgent.match(/MSIE 10\.|Trident.*rv[ :]*1[01]\.| Edge\/1\d\./));try{new E("test")}catch(a){var E=function(a,b){var c;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};E.prototype=window.Event.prototype,window.CustomEvent=E}return{version:"0.6.1",findProperties:g,getCss:i,init:c,refresh:e}})}();